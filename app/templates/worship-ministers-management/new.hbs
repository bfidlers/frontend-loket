{{page-title "Voeg bedienar toe" }}

  {{#if this.shouldSelectPerson}}
    <Shared::Persoon::PersoonSearchForm
      class="au-c-body-container"
      @onCreateNewPerson={{this.createNewPerson}}
      @onCancel={{this.cancel}}
      @onSelect={{this.selectPersoon}}
    >
      <AuHeading @skin="2">Voeg een nieuwe positie toe</AuHeading>
    </Shared::Persoon::PersoonSearchForm>
  {{else}}
  <AuToolbar @border="bottom" @size="large" as |Group|>
    <Group>
      <div>
        <AuHeading @skin="2">
          Nieuw bedienaar toevoegen
        </AuHeading>

        <p class="au-u-h3">
          {{@model.person.gebruikteVoornaam}}
          {{@model.person.achternaam~}}
        </p>
      </div>
    </Group>

    <Group>
      <AuButtonGroup>
        <AuButton
          @loading={{this.createWorshipMinister.isRunning}}
          @disabled={{this.createWorshipMinister.isRunning}}
          type="submit"
          form="create-worship-minister"
        >
          Bedienaar toevoegen
        </AuButton>
        <AuLink
          @route="worship-ministers-management"
          @skin="button-secondary"
        >
          Annuleer
        </AuLink>
      </AuButtonGroup>
    </Group>
  </AuToolbar>

  <form
    id="create-worship-minister"
    class="au-c-body-container"
    {{on "submit" (perform this.createWorshipMinister)}}
  >
    <div class="au-u-2-3@medium au-o-box">
      <div class="au-u-margin-bottom-small">
          <AuLabel for="worship-minister-function">Functienaam</AuLabel>
          <PowerSelect
            @id="worship-minister-function"
            @allowClear={{this.allowClear}}
            @renderInPlace={{this.renderInPlace}}
            @disabled={{this.disabled}}
            @searchEnabled={{true}}
            @loadingMessage = 'Aan het laden...'
            @noMatchesMessage = 'Geen resultaten'
            @searchMessage = 'Typ om te zoeken'
            @placeholder="Selecteer bedienaar functie"
            @options={{this.options}}
            @selected={{this.selected}}
            @onChange={{fn (mut this.selected)}}
            @onFocus={{fn this.getWorshipMinisterFunctionId this.selected}}
            as |singleselect|>
            {{singleselect}}
          </PowerSelect>
      </div>

      <div class="au-o-grid au-o-grid--tiny au-u-margin-bottom-small">
        <div class="au-o-grid__item au-u-1-2">
          <AuLabel for="worship-minister-start-date">Startdatum</AuLabel>
          <AuDatePicker
            @value={{@model.worshipMinister.agentStartDate}}
            @onChange={{fn this.handleDateChange "agentStartDate"}}
            @id="worship-minister-start-date"
            />
        </div>

        <div class="au-o-grid__item au-u-1-2">
          <AuLabel for="worship-minister-end-date">Eindedatum</AuLabel>
          <AuDatePicker
            @value={{@model.worshipMinister.agentEndDate}}
            @onChange={{fn this.handleDateChange "agentEndDate"}}
            @id="worship-minister-end-date"
          />
        </div>
      </div>

      <AuAlert @skin="info" @icon="info-circle" @size="small">
        <p>
          Klik op "Bedienaar toevoegen" om contactgegevens verder aan te vullen.
        </p>
      </AuAlert>
    </div>
  </form>
{{/if}}
