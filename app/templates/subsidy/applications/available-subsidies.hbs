{{page-title "Beschikbare subsidiemaatregelen"}}

<AuToolbar @border="bottom" @size="large" @nowrap="{{true}}">
  <AuToolbarGroup class="au-u-1-2@medium">
    <div>
      <AuHeading @skin="2">Beschikbare subsidiemaatregelen</AuHeading>
      <p>
        Kies een van de subsidiemaatregelen om een nieuwe aanvraag te starten. Bekijk <a href="https://lokaalbestuur.vlaanderen.be/loket-lokaal-bestuur-module-subsidies" target="_blank"
                  rel="noopener noreferrer">inhoudelijke informatie over de subsidies</a> die je hier kan aanvragen.
      </p>
    </div>
  </AuToolbarGroup>
  <AuToolbarGroup>
    <LinkTo @route="subsidy.applications" class="au-c-button au-c-button--secondary" type="button">
      <AuIcon @icon="arrow-left" @alignment="left"/> Terug naar lopende subsidiedossiers
    </LinkTo>
  </AuToolbarGroup>
</AuToolbar>

<AuDataTable
  @content={{this.model}}
  @isLoading={{this.isLoadingModel}}
  @noDataMessage="Geen beschikbare subsidiemaatregelen gevonden"
  @sort={{this.sort}}
  @page={{this.page}}
  @size={{this.size}}
  as |t|
>
  <t.content as |c|>
    <c.header>
      <AuDataTableThSortable @field="subsidyMeasureOffer.title" @currentSorting={{this.sort}} @label="Subsidiemaatregel"/>
      <AuDataTableThSortable @field="title" @currentSorting={{this.sort}} @label="Periode"/>
      <!-- <AuDataTableThSortable
        @field="period.begin"
        @currentSorting={{this.sort}}
        @label="Aanvragen vanaf"
      /> -->
      <AuDataTableThSortable
        @field="active-application-flow.first-application-step.subsidy-procedural-step.period.end"
        @currentSorting={{this.sort}}
        @label="Indienen tot"
      />
      <th></th>
    </c.header>

    <c.body as |series|>
      <td>{{series.subsidyMeasureOffer.title}}</td>
      <td>
        {{series.label}}
        <AuHelpText @skin="secondary" class="au-u-margin-top-none">
          {{moment-format series.period.begin "DD MMMM YYYY"}}
          &#8211;
          {{moment-format series.period.end "DD MMMM YYYY"}}
        </AuHelpText>
      </td>
      <!-- <td>{{moment-format series.period.begin "DD-MM-YYYY"}}</td> -->
      <td>{{moment-format series.deadline.end "DD MMMM YYYY"}}</td>
      <td>
        <LinkTo @route="subsidy.applications.new" @query={{hash seriesId=series.id}} class="au-c-link">
          Start aanvraag
        </LinkTo>
      </td>
    </c.body>
  </t.content>
</AuDataTable>