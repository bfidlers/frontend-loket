{{title "Mandatenbeheer " bestuurseenheid.classificatie.label " " bestuurseenheid.naam}}
<AuToolbar @size="large" class="au-u-padding-bottom-none">
  <AuToolbarGroup>
    <AuHeading @skin="2">Beheer Fracties</AuHeading>
  </AuToolbarGroup>
  <AuToolbarGroup>
    <AuButton {{action "createNewFractie"}}>Voeg fractie toe</AuButton>
  </AuToolbarGroup>
</AuToolbar>
<AuToolbar @size="large">
  <AuToolbarGroup>
    <div class="power-select">
      {{mandatenbeheer/bestuursperioden-selector
          options=bestuursperioden
          selectedStartDate=startDate
          onSelect=(action 'selectPeriod')
      }}
    </div>
  </AuToolbarGroup>
</AuToolbar>

{{#if saveFractie.isRunning}}
  <AuLoader @size="small" />
{{else}}
  <div class="au-c-body-container">
    <div class="au-c-data-table">
      <div class="au-c-data-table__wrapper">
        <table class="au-c-data-table__table">
          <thead>
            <tr class="au-c-data-table__header">
              <th>Fractienaam</th>
              <th>Bestuursperiode</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            {{#if newFractie}}
              {{mandatenbeheer/fractie-table-row
                  onCancel=(action "cancelEdit")
                  onSave=(perform saveFractie)
                  fractie=newFractie
                  editMode=true
              }}
            {{/if}}
            {{#each model as |row|}}
              {{mandatenbeheer/fractie-table-row
                  onCancel=(action "cancelEdit")
                  onSave=(perform saveFractie)
                  fractie=row
              }}
            {{else}}
              {{#unless newFractie}}
                <tr>
                  <td colspan="3" class="au-u-text-center">
                    <AuHeading @level="3" @skin="4" class="au-u-margin-bottom-small">Geen fracties gevonden</AuHeading>
                    <AuButton {{on "click" (action "createNewFractie")}} @skin="secondary">
                      <AuIcon @icon="add" @alignment="left" />
                      Voeg een nieuwe fractie toe
                    </AuButton>
                  </td>
                </tr>
              {{/unless}}
            {{/each}}
          </tbody>
        </table>
      </div>

      {{#if saveFractie.isRunning}}
        <div class="loader-wrapper">
          <div class="loader">
            <span class="u-visually-hidden">Bezig...</span>
          </div>
        </div>
      {{else}}
        <div class="container-flex--scroll">
          <table class="data-table data-table--nowrap">
            <thead>
              <tr class="data-table__header">
                <th>Fractienaam</th>
                <th>Bestuursperiode</th>
                <th></th>
              <th>Gelinkt notuleren</th>
              </tr>
            </thead>
            <tbody>
              {{#if newFractie}}
                {{mandatenbeheer/fractie-table-row
                    onCancel=(action "cancelEdit")
                    onSave=(perform saveFractie)
                    fractie=newFractie
                    editMode=true
                }}
              {{/if}}
              {{#each model as |row|}}
                {{mandatenbeheer/fractie-table-row
                    onCancel=(action "cancelEdit")
                    onSave=(perform saveFractie)
                    fractie=row
                }}
              {{else}}
                {{#unless newFractie}}
                  <tr>
                    <td colspan="3">
                      Geen fracties gevonden.
                      {{wu-button
                          label="Voeg een nieuwe fractie toe"
                          onClick=(action "createNewFractie")
                          isNarrow=true
                          isLink=true
                      }}
                    </td>
                  </tr>
                {{/unless}}
              {{/each}}
            </tbody>
          </table>
        </div>
      {{/if}}
    </div>
  </div>
{{/if}}
